(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d942a0e"],{"0ed4":function(t,e,a){"use strict";var r=a("2076"),i=a.n(r);i.a},"113b":function(t,e,a){},1829:function(t,e,a){"use strict";var r=a("b737"),i=a.n(r);i.a},2076:function(t,e,a){},"397a":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"category"}},[a("nav-bar",{staticClass:"nav-bar",scopedSlots:t._u([{key:"center",fn:function(){return[t._v("商品分类")]},proxy:!0}])}),a("div",{staticClass:"content"},[a("tab-menu",{attrs:{categories:t.categories},on:{selectItem:t.selectItem}}),a("scroll",{attrs:{id:"tab-content"}},[a("tab-content-category",{attrs:{subcategories:t.showSubcategory}})],1)],1)],1)},i=[],n=a("a7ac"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("scroll",{attrs:{id:"tab-menu"}},t._l(t.categories,(function(e,r){return a("div",{key:r,staticClass:"menu-list-item",class:{active:r===t.currentIndex},on:{click:function(e){return t.itemClick(r)}}},[t._v(" "+t._s(e.title)+" ")])})),0)},c=[],o=a("5d17"),l={name:"TabMenu",components:{Scroll:o["a"]},props:{categories:Array},data(){return{currentIndex:0}},methods:{itemClick(t){this.currentIndex=t,this.$emit("selectItem",t)}}},u=l,d=(a("0ed4"),a("2877")),g=Object(d["a"])(u,s,c,!1,null,"82bbffb8",null),h=g.exports,b=a("9bd0"),p=a("6d71"),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.subcategories.list?a("grid-view",{staticClass:"grid",attrs:{cols:3,lineSpace:15,"v-margin":20}},t._l(t.subcategories.list,(function(e,r){return a("div",{key:r,staticClass:"item"},[a("a",{attrs:{href:e.link}},[a("img",{staticClass:"item-img",attrs:{src:e.image,alt:""}}),a("div",{staticClass:"item-text"},[t._v(t._s(e.title))])])])})),0):t._e()],1)},f=[],m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"gridView",staticClass:"grid-view"},[t._t("default")],2)},v=[],_={name:"GridView",props:{cols:{type:Number,default:2},hMargin:{type:Number,default:8},vMargin:{type:Number,default:8},itemSpace:{type:Number,default:8},lineSpace:{type:Number,default:8}},mounted:function(){setTimeout(this._autoLayout,20)},updated:function(){this._autoLayout()},methods:{_autoLayout:function(){let t=this.$refs.gridView,e=t.children;t.style.padding=`${this.vMargin}px ${this.hMargin}px`;let a=(t.clientWidth-2*this.hMargin-(this.cols-1)*this.itemSpace)/this.cols;for(let r=0;r<e.length;r++){let t=e[r];t.style.width=a+"px",(r+1)%this.cols!==0&&(t.style.marginRight=this.itemSpace+"px"),r>=this.cols&&(t.style.marginTop=this.lineSpace+"px")}}}},C=_,x=(a("8706"),Object(d["a"])(C,m,v,!1,null,"22769f50",null)),k=x.exports,w={name:"TabContentCategory",components:{GridView:k},props:{subcategories:{type:Object,default(){return{}}}}},D=w,I=(a("cbe2"),Object(d["a"])(D,y,f,!1,null,"698269d6",null)),S=I.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("grid-view",t._l(t.categoryDetail,(function(t,e){return a("goods-list-item",{key:e,attrs:{"goods-item":t}})})),1)},$=[],j=a("9977"),O={name:"TabContentDetail",components:{GridView:k,GoodsListItem:j["a"]},props:{categoryDetail:{type:Array,default(){return[]}}}},M=O,E=Object(d["a"])(M,T,$,!1,null,"fa66214e",null),N=(E.exports,a("1bab"));function G(){return Object(N["a"])({url:"/category"})}function L(t){return Object(N["a"])({url:"/subcategory",params:{maitKey:t}})}function V(t,e){return Object(N["a"])({url:"/subcategory/detail",params:{miniWallkey:t,type:e}})}var A={name:"Category",components:{NavBar:n["a"],TabMenu:h,TabControl:b["a"],Scroll:o["a"],TabContentCategory:S,GoodsList:p["a"]},data(){return{categories:[],categoryData:{},currentIndex:-1,currentType:"pop"}},created(){this._getCategory()},computed:{showSubcategory(){if(-1!=this.currentIndex)return this.categoryData[this.currentIndex].subcategories},showCategoryDetail(){if(-1!=this.currentIndex)return this.categoryData[this.currentIndex].categoryDetail[this.currentType]}},methods:{_getCategory(){G().then(t=>{this.categories=t.data.category.list;for(let e=0;e<this.categories.length;e++)this.categoryData[e]={subcategories:{},categoryDetail:{pop:[],new:[],sell:[]}};this._getSubcategories(0)})},_getSubcategories(t){this.currentIndex=t;const e=this.categories[t].maitKey;L(e).then(e=>{void 0!=e&&(this.categoryData[t].subcategories=e.data,this.categoryData={...this.categoryData},this._getCategoryDetail("pop"),this._getCategoryDetail("new"),this._getCategoryDetail("sell"))})},_getCategoryDetail(t){const e=this.categories[this.currentIndex].miniWallkey;V(e,t).then(e=>{this.categoryData[this.currentIndex].categoryDetail[t]=e,this.categoryData={...this.categoryData}})},selectItem(t){this._getSubcategories(t)},tabClick(t){switch(t){case 0:this.currentType="pop";break;case 1:this.currentType="new";break;case 2:this.currentType="sell";break}}}},W=A,J=(a("1829"),Object(d["a"])(W,r,i,!1,null,"9bced2b0",null));e["default"]=J.exports},"3d7f":function(t,e,a){"use strict";var r=a("8f32"),i=a.n(r);i.a},"7b8f":function(t,e,a){},8706:function(t,e,a){"use strict";var r=a("113b"),i=a.n(r);i.a},"8f32":function(t,e,a){},"9bd0":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-control"},t._l(t.titles,(function(e,r){return a("div",{key:e.id,staticClass:"tab-control-item",class:{active:r===t.currentindex},on:{click:function(e){return t.itemClick(r)}}},[a("span",[t._v(t._s(e))])])})),0)},i=[],n={name:"TabControl",props:{titles:{type:Array,default(){return[]}}},data(){return{currentindex:0}},components:{},methods:{itemClick(t){t!==this.currentindex&&(this.currentindex=t,this.$emit("tabClick",t))}}},s=n,c=(a("3d7f"),a("2877")),o=Object(c["a"])(s,r,i,!1,null,"8f7537ca",null);e["a"]=o.exports},b737:function(t,e,a){},cbe2:function(t,e,a){"use strict";var r=a("7b8f"),i=a.n(r);i.a}}]);
//# sourceMappingURL=chunk-6d942a0e.2960c925.js.map